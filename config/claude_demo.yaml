name: "Claude LLM Integration Demo"
description: "Demonstrates delegating tasks to Claude AI via bash action"

states:
  - name: "ğŸš€ starting"
    description: "Process initialization"
  - name: "ğŸ¤– claude_processing"  
    description: "Delegating task to Claude AI"
  - name: "âœ… claude_completed"
    description: "Claude completed the task"
  - name: "âš ï¸ claude_failed"
    description: "Claude task failed"
  - name: "ğŸ finished"
    description: "Process completed"

start_state: "ğŸš€ starting"

actions:
  "ğŸš€ starting":
    - type: log
      message: "Starting Claude LLM integration demo"
  "ğŸ¤– claude_processing":
    - type: bash
      description: "Delegate task to Claude AI"
      command: "./scripts/llm_claude.sh {task_file} {context_dir}"
      timeout: 600  # 10 minutes for Claude processing
      success: "claude_completed"
      error_mappings:
        "1": "claude_failed"
        "2": "claude_timeout"
        "3": "claude_error"
        "4": "claude_rate_limited"
        "5": "claude_auth_error"
        "6": "claude_unknown_error"
      recoverable_errors: ["claude_rate_limited"]
  "âœ… claude_completed":
    - type: log
      message: "Claude AI successfully completed the task"
  "âš ï¸ claude_failed":
    - type: log
      message: "Claude AI task failed - check logs for details"
  "ğŸ finished":
    - type: log
      message: "Claude LLM integration demo completed"

transitions:
  - from: "ğŸš€ starting"
    to: "ğŸ¤– claude_processing"
    event: "start_claude_task"
  - from: "ğŸ¤– claude_processing"
    to: "âœ… claude_completed"
    event: "claude_completed"
  - from: "ğŸ¤– claude_processing"
    to: "âš ï¸ claude_failed"
    event: "claude_failed"
  - from: "ğŸ¤– claude_processing"
    to: "âš ï¸ claude_failed"
    event: "claude_timeout"
  - from: "ğŸ¤– claude_processing"
    to: "âš ï¸ claude_failed"
    event: "claude_error"
  - from: "ğŸ¤– claude_processing"
    to: "âš ï¸ claude_failed"
    event: "claude_auth_error"
  - from: "ğŸ¤– claude_processing"
    to: "ğŸ¤– claude_processing"
    event: "claude_rate_limited"  # Retry on rate limit
  - from: "âœ… claude_completed"
    to: "ğŸ finished"
    event: "finish"
  - from: "âš ï¸ claude_failed"
    to: "ğŸ finished"
    event: "finish"
  - from: "*"
    to: "âš ï¸ claude_failed"
    event: "error"