name: "Claude LLM Integration Demo"
description: "Demonstrates delegating tasks to Claude AI via bash action"

states:
  - name: "🚀 starting"
    description: "Process initialization"
  - name: "🤖 claude_processing"  
    description: "Delegating task to Claude AI"
  - name: "✅ claude_completed"
    description: "Claude completed the task"
  - name: "⚠️ claude_failed"
    description: "Claude task failed"
  - name: "🏁 finished"
    description: "Process completed"

start_state: "🚀 starting"

actions:
  "🚀 starting":
    - type: log
      message: "Starting Claude LLM integration demo"
  "🤖 claude_processing":
    - type: bash
      description: "Delegate task to Claude AI"
      command: "./scripts/llm_claude.sh {task_file} {context_dir}"
      timeout: 600  # 10 minutes for Claude processing
      success: "claude_completed"
      error_mappings:
        "1": "claude_failed"
        "2": "claude_timeout"
        "3": "claude_error"
        "4": "claude_rate_limited"
        "5": "claude_auth_error"
        "6": "claude_unknown_error"
      recoverable_errors: ["claude_rate_limited"]
  "✅ claude_completed":
    - type: log
      message: "Claude AI successfully completed the task"
  "⚠️ claude_failed":
    - type: log
      message: "Claude AI task failed - check logs for details"
  "🏁 finished":
    - type: log
      message: "Claude LLM integration demo completed"

transitions:
  - from: "🚀 starting"
    to: "🤖 claude_processing"
    event: "start_claude_task"
  - from: "🤖 claude_processing"
    to: "✅ claude_completed"
    event: "claude_completed"
  - from: "🤖 claude_processing"
    to: "⚠️ claude_failed"
    event: "claude_failed"
  - from: "🤖 claude_processing"
    to: "⚠️ claude_failed"
    event: "claude_timeout"
  - from: "🤖 claude_processing"
    to: "⚠️ claude_failed"
    event: "claude_error"
  - from: "🤖 claude_processing"
    to: "⚠️ claude_failed"
    event: "claude_auth_error"
  - from: "🤖 claude_processing"
    to: "🤖 claude_processing"
    event: "claude_rate_limited"  # Retry on rate limit
  - from: "✅ claude_completed"
    to: "🏁 finished"
    event: "finish"
  - from: "⚠️ claude_failed"
    to: "🏁 finished"
    event: "finish"
  - from: "*"
    to: "⚠️ claude_failed"
    event: "error"