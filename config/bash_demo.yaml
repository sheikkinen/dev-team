name: "Bash Action Demo Process"
description: "Demonstrates bash action execution with parameter substitution and error handling"

states:
  - name: "ğŸš€ starting"
    description: "Process initialization"
  - name: "ğŸ“ processing_command"  
    description: "Executing bash command"
  - name: "âœ… command_completed"
    description: "Command executed successfully"
  - name: "âŒ command_failed"
    description: "Command execution failed"
  - name: "ğŸ finished"
    description: "Process completed"

start_state: "ğŸš€ starting"

actions:
  "ğŸš€ starting":
    - type: log
      message: "Starting bash action demo process"
  "ğŸ“ processing_command":
    - type: bash
      description: "Echo command with parameter substitution"
      command: "echo 'Hello {name}! Processing file: {filename} at $(date)'"
      timeout: 10
      success: "command_completed"
      error_mappings:
        "1": "command_failed"
        "127": "command_not_found"
      recoverable_errors: []
  "âœ… command_completed":
    - type: log
      message: "Bash command completed successfully"
  "âŒ command_failed":
    - type: log
      message: "Bash command failed, retrying..."
  "ğŸ finished":
    - type: log
      message: "Bash action demo process completed"

transitions:
  - from: "ğŸš€ starting"
    to: "ğŸ“ processing_command"
    event: "start_processing"
  - from: "ğŸ“ processing_command"
    to: "âœ… command_completed"
    event: "command_completed"
  - from: "ğŸ“ processing_command"
    to: "âŒ command_failed"
    event: "command_failed"
  - from: "âŒ command_failed"
    to: "ğŸ“ processing_command"
    event: "retry"
  - from: "âœ… command_completed"
    to: "ğŸ finished"
    event: "finish"
  - from: "*"
    to: "âŒ command_failed"
    event: "error"